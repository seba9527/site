(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{571:function(t,s,a){"use strict";a.r(s);var e=a(14),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("记录一下git的基础用法")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"基本配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[t._v("#")]),t._v(" 基本配置")]),t._v(" "),a("p",[t._v("如果是本地新建git仓库，可以用"),a("code",[t._v("git init")]),t._v("，使某个文件夹被git所管理。")]),t._v(" "),a("h3",{attrs:{id:"配置用户名和邮箱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置用户名和邮箱"}},[t._v("#")]),t._v(" 配置用户名和邮箱")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.name "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Your Name"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.email "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email@example.com"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"配置ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置ssh"}},[t._v("#")]),t._v(" 配置ssh")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("ssh-keygen -t rsa -C "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"youremail@example.com"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"配置gpg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置gpg"}},[t._v("#")]),t._v(" 配置gpg")]),t._v(" "),a("p",[t._v("如果要对每次的commit都进行认证，可以配置签名，首先生成gpg key")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("gpg --gen-key\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("然后查看GPG key："),a("code",[t._v("gpg --list-keys")]),t._v("。再获取公钥："),a("code",[t._v("gpg --armor --export pub GPG key ID")]),t._v("，导入到GitHub中。\n本地的git配置就是先设置git签名时用的key："),a("code",[t._v("git config --global user.signingkey pub GPG key ID")]),t._v("。然后设置全局都使用GPG签名："),a("code",[t._v("git config --global commit.gpgsign true")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"常用git命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用git命令"}},[t._v("#")]),t._v(" 常用git命令")]),t._v(" "),a("h3",{attrs:{id:"git-status"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-status"}},[t._v("#")]),t._v(" git status")]),t._v(" "),a("p",[t._v("查看当前版本中修改内容，如果发现不一致，可以用"),a("code",[t._v("git diff file")]),t._v("查看不同之处。")]),t._v(" "),a("h3",{attrs:{id:"git-add-rm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-add-rm"}},[t._v("#")]),t._v(" git add/rm")]),t._v(" "),a("p",[t._v("用于将新添加的文件/删除的文件和git联系起来，基本上每次commit之前都要add才行。")]),t._v(" "),a("h3",{attrs:{id:"git-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-commit"}},[t._v("#")]),t._v(" git commit")]),t._v(" "),a("p",[t._v("commit，提交版本，并用m参数加以说明message")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wrote a readme file"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("master "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root-commit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" eaadf4e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" wrote a readme "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" changed, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" insertions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n create mode "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100644")]),t._v(" readme.txt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"git-log"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-log"}},[t._v("#")]),t._v(" git log")]),t._v(" "),a("p",[t._v("查看日志提交记录")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/2018-12/Snipaste_2018-12-05_11-02-40.png",alt:"git log"}})]),t._v(" "),a("p",[t._v("如果输出信息太多，可以加上参数，每次输出一行")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" log --pretty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("oneline\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"git-reset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-reset"}},[t._v("#")]),t._v(" git reset")]),t._v(" "),a("p",[t._v("git版本回溯，在Git中，用"),a("code",[t._v("HEAD")]),t._v("表示当前版本，也就是最新的提交"),a("code",[t._v("1094adb")]),t._v("上一个版本就是"),a("code",[t._v("HEAD^")]),t._v("，上上一个版本就是"),a("code",[t._v("HEAD^^")]),t._v("，当然往上100个版本写成"),a("code",[t._v("HEAD~100")]),t._v("。可以使用这个命令来进行版本后退。"),a("strong",[t._v("主要要添加"),a("code",[t._v("-- hard")]),t._v("参数，否则不起作用")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset --hard HEAD^\nHEAD is now at e475afc "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" distributed\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset --hard HEAD~1\nHEAD is now at e475afc "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" distributed\n或者指定id\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$git")]),t._v(" reset --hard commit_id\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[a("code",[t._v("git reset")]),t._v("命令既可以回退版本，也可以把暂存区的修改回退到工作区。当我们用"),a("code",[t._v("HEAD")]),t._v("时，表示最新的版本。例如")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset HEAD readme.txt\nUnstaged changes after reset:\nM    readme.txt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"git-reflog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-reflog"}},[t._v("#")]),t._v(" git reflog")]),t._v(" "),a("p",[t._v("记录每一次commit记录，可以配合"),a("code",[t._v("git reset")]),t._v("来用，即如果回到之前版本，再会过去，可以查看commit记录来确定id，再"),a("code",[t._v("git reset --hard commit_id")]),t._v("即可。")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reflog\ne475afc HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(": reset: moving to HEAD^\n1094adb "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(": commit: append GPL\ne475afc HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(": commit: "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" distributed\neaadf4e HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(": commit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": wrote a readme "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"git-checkout-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-checkout-file"}},[t._v("#")]),t._v(" git checkout -- file")]),t._v(" "),a("p",[t._v("checkout 文件可以丢弃工作区的修改。如果之前add过，可以回到add当时的状态；如果没有add过，可以回到当前版本的状态（未修改）\n所以当是修改之后再git add的话，将无法回退，但是没有提交。这时可以用命令"),a("code",[t._v("git reset HEAD <file>")]),t._v("可以把暂存区的修改撤销掉（unstage）。\n"),a("strong",[t._v("总结")])]),t._v(" "),a("ul",[a("li",[t._v("文件没有"),a("code",[t._v("git add")]),t._v("，此时文件在工作区，直接用"),a("code",[t._v("git checkout -- file")]),t._v("可以恢复到上一个版本。")]),t._v(" "),a("li",[t._v("文件已经"),a("code",[t._v("git add")]),t._v("，此时文件在暂存区，但是没有提交，使用"),a("code",[t._v("git reset HEAD file")]),t._v("来抛弃暂存区的修改；此时文件修改只存在于工作区中，再次使用"),a("code",[t._v("git checkout -- file")]),t._v("就能恢复到上一个版本。")]),t._v(" "),a("li",[a("code",[t._v("git checkout -- file")]),t._v("还能来恢复被删除的文件，总之就是用版本库替换当前工作区。")])])])}),[],!1,null,null,null);s.default=n.exports}}]);